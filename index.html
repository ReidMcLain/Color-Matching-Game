<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>The Box</title>
  </head>
  <body>

    <div id="myModal1" class="modal">
      <div class="modal-content">
        <p>Level 1 Complete! Click anywhere to continue</p>
      </div>
    </div>

    <div id="myModal2" class="modal">
      <div class="modal-content">
        <p>Level 2 Complete! Click anywhere to continue</p>
      </div>
    </div>

    <div id="myModal3" class="modal">
      <div class="modal-content">
        <p>Level 3 Complete! Click anywhere to continue</p>
      </div>
    </div>

    <div id="myModal4" class="modal">
      <div class="modal-content">
        <p id="timePara">Congradulations! You finished The Box in <span id ='timeSpan'></span>, Click anywhere to play again</p>
      </div>
    </div>

    <audio id="DSS" src="DemonSlayerSounds.mp3" preload="auto"></audio>
    <div class="container">
      <div id="fireWorks">
        <canvas id="myCanvas" width="800" height="800"></canvas>
        <script>
          const max_fireworks = 5,
            max_sparks = 50;
          let canvas = document.getElementById("myCanvas");
          let context = canvas.getContext("2d");
          let fireworks = [];

          for (let i = 0; i < max_fireworks; i++) {
            let firework = {
              sparks: [],
            };
            for (let n = 0; n < max_sparks; n++) {
              let spark = {
                vx: Math.random() * 5 + 0.5,
                vy: Math.random() * 5 + 0.5,
                weight: Math.random() * 0.3 + 0.03,
                red: Math.floor(Math.random() * 2),
                green: Math.floor(Math.random() * 2),
                blue: Math.floor(Math.random() * 2),
              };
              if (Math.random() > 0.5) spark.vx = -spark.vx;
              if (Math.random() > 0.5) spark.vy = -spark.vy;
              firework.sparks.push(spark);
            }
            fireworks.push(firework);
            resetFirework(firework);
          }
          window.requestAnimationFrame(explode);

          function resetFirework(firework) {
            firework.x = Math.floor(Math.random() * canvas.width);
            firework.y = canvas.height;
            firework.age = 0;
            firework.phase = "fly";
          }

          function explode() {
            context.clearRect(0, 0, canvas.width, canvas.height);
            fireworks.forEach((firework, index) => {
              if (firework.phase == "explode") {
                firework.sparks.forEach((spark) => {
                  for (let i = 0; i < 10; i++) {
                    let trailAge = firework.age + i;
                    let x = firework.x + spark.vx * trailAge;
                    let y =
                      firework.y +
                      spark.vy * trailAge +
                      spark.weight * trailAge * spark.weight * trailAge;
                    let fade = i * 20 - firework.age * 2;
                    let r = Math.floor(spark.red * fade);
                    let g = Math.floor(spark.green * fade);
                    let b = Math.floor(spark.blue * fade);
                    context.beginPath();
                    context.fillStyle = "rgba(" + r + "," + g + "," + b + ",1)";
                    context.rect(x, y, 4, 4);
                    context.fill();
                  }
                });
                firework.age++;
                if (firework.age > 100 && Math.random() < 0.05) {
                  resetFirework(firework);
                }
              } else {
                firework.y = firework.y - 10;
                for (let spark = 0; spark < 15; spark++) {
                  context.beginPath();
                  context.fillStyle =
                    "rgba(" + index * 50 + "," + spark * 17 + ",0,1)";
                  context.rect(
                    firework.x + Math.random() * spark - spark / 2,
                    firework.y + spark * 4,
                    4,
                    4
                  );
                  context.fill();
                }
                if (Math.random() < 0.001 || firework.y < 200)
                  firework.phase = "explode";
              }
            });
            window.requestAnimationFrame(explode);
          }
        </script>
      </div>

      <nav id="nav">The Box</nav>
      <nav id="Lv1">Level 1</nav>
      <nav id="Lv2">Level 2ðŸ”¥</nav>
      <nav id="Lv3">Level 3ðŸ”¥ðŸ”¥</nav>
      <nav id="Lv4">Level 4ðŸ”¥ðŸ”¥ðŸ”¥</nav>
      <div id="FourBoxes">
        <div id="FourBox1"></div>
        <div id="FourBox2"></div>
        <div id="FourBox3"></div>
        <div id="FourBox4"></div>
      </div>
      <div id="NineBoxes">
        <div id="NineBox1"></div>
        <div id="NineBox2"></div>
        <div id="NineBox3"></div>
        <div id="NineBox4"></div>
        <div id="NineBox5"></div>
        <div id="NineBox6"></div>
        <div id="NineBox7"></div>
        <div id="NineBox8"></div>
        <div id="NineBox9"></div>
      </div>
      <div id="SixteenBoxes">
        <div id="SixteenBox1"></div>
        <div id="SixteenBox2"></div>
        <div id="SixteenBox3"></div>
        <div id="SixteenBox4"></div>
        <div id="SixteenBox5"></div>
        <div id="SixteenBox6"></div>
        <div id="SixteenBox7"></div>
        <div id="SixteenBox8"></div>
        <div id="SixteenBox9"></div>
        <div id="SixteenBox10"></div>
        <div id="SixteenBox11"></div>
        <div id="SixteenBox12"></div>
        <div id="SixteenBox13"></div>
        <div id="SixteenBox14"></div>
        <div id="SixteenBox15"></div>
        <div id="SixteenBox16"></div>
      </div>
      <div id="TwentyFiveBoxes">
        <div id="TwentyFiveBox1"></div>
        <div id="TwentyFiveBox2"></div>
        <div id="TwentyFiveBox3"></div>
        <div id="TwentyFiveBox4"></div>
        <div id="TwentyFiveBox5"></div>
        <div id="TwentyFiveBox6"></div>
        <div id="TwentyFiveBox7"></div>
        <div id="TwentyFiveBox8"></div>
        <div id="TwentyFiveBox9"></div>
        <div id="TwentyFiveBox10"></div>
        <div id="TwentyFiveBox11"></div>
        <div id="TwentyFiveBox12"></div>
        <div id="TwentyFiveBox13"></div>
        <div id="TwentyFiveBox14"></div>
        <div id="TwentyFiveBox15"></div>
        <div id="TwentyFiveBox16"></div>
        <div id="TwentyFiveBox17"></div>
        <div id="TwentyFiveBox18"></div>
        <div id="TwentyFiveBox19"></div>
        <div id="TwentyFiveBox20"></div>
        <div id="TwentyFiveBox21"></div>
        <div id="TwentyFiveBox22"></div>
        <div id="TwentyFiveBox23"></div>
        <div id="TwentyFiveBox24"></div>
        <div id="TwentyFiveBox25"></div>
      </div>
      <nav id="instructions">Click the Boxes, then match the colors</nav>
    </div>
    <script src="app.js"></script>
  </body>
</html>
